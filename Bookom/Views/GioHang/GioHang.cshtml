@using Bookom.Models
@model List<GioHang>

@{
    ViewBag.Title = "Giỏ hàng của bạn";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<h2 class="text-success text-center font-weight-bold">THÔNG TIN GIỎ HÀNG</h2>

<table class="table table-bordered text-center mt-4">
    <thead class="bg-success text-white">
        <tr>
            <th>Mã sách</th>
            <th>Tên sách</th>
            <th>Ảnh bìa</th>
            <th>Số lượng</th>
            <th>Đơn giá</th>
            <th>Thành tiền</th>
            <th>Thao tác</th>
        </tr>
    </thead>
    <tbody>
        @foreach (var item in Model)
        {
            <tr>
                <td>@item.iMaSach</td>
                <td>@item.sTenSach</td>
                <td>
                    <img src="@Url.Content("~/Content/img/" + item.sAnhBia)" width="50" />
                </td>
                <td>
                    @using (Html.BeginForm("CapNhatGioHang", "GioHang", new { iMaSP = item.iMaSach }))
                    {
                        <input type="number" min="1" name="txtSoLuong" value="@item.iSoLuong" style="width: 50px; text-align: center;" />
                        <input type="submit" value="Cập nhật" class="btn btn-sm btn-warning" />
                    }
                </td>
                <td>@String.Format("{0:0,0}", item.dDonGia)</td>
                <td class="text-danger font-weight-bold">@String.Format("{0:0,0}", item.dThanhTien)</td>
                <td>
                    <a href="@Url.Action("XoaGioHang", "GioHang", new { iMaSP = item.iMaSach })" class="btn btn-danger btn-sm" onclick="return confirm('Bạn chắc chắn muốn xóa?');">
                        <i class="fas fa-trash"></i> Xóa
                    </a>
                </td>
            </tr>
        }
    </tbody>
    <tfoot>
        <tr>
            <td colspan="5" class="text-right font-weight-bold">TỔNG CỘNG:</td>
            <td class="text-danger font-weight-bold" style="font-size: 1.2rem;">
                @String.Format("{0:0,0}", ViewBag.TongTien) VNĐ
            </td>
            <td></td>
        </tr>
    </tfoot>
</table>

<div class="text-center">
    <a href="@Url.Action("SanPham", "Home")" class="btn btn-outline-success">
        <i class="fas fa-arrow-left"></i> Tiếp tục mua hàng
    </a>

    <a href="@Url.Action("DatHang", "GioHang")" class="btn btn-success btn-lg">
        Thanh toán ngay <i class="fas fa-arrow-right"></i>
    </a>
</div>